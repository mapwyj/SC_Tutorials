{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf410
{\fonttbl\f0\fnil\fcharset77 Monaco;}
{\colortbl;\red255\green255\blue255;\red191\green0\blue0;\red0\green0\blue191;}
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural\pardirnatural

\f0\fs18 \cf2 // data preparation\cf0 \
\
\cf2 // polar coordinates\cf0 \
~polarClub = \{\
	\cf3 var\cf0  phi, rSquare, x, y;\
	\
	x = ~absX.kr;\
	y = ~absY.kr;\
	\
	phi = atan2(y*2-1, x*2-1);\
	rSquare = x.squared + y.squared;\
	\
	\cf2 // rSquare is in [0, 1.2]\cf0 \
	[phi, rSquare].flatten\
\};\
\
~polarHead = \{\
	\cf3 var\cf0  phi, rSquare, x, y;\
	\
	x = ~headAbsX.kr;\
	y = ~headAbsY.kr;\
	\
	phi = atan2(y*2-1, x*2-1);\
	rSquare = x.squared + y.squared;\
	\
\
	\cf2 // rSquare is in [0, 1.2]\cf0 \
	[phi, rSquare].flatten\
\};\
\
\
~polarRelHead = \{\
	\cf3 var\cf0  phi, rSquare, x, y;\
	\
	x = ~absX.kr - ~headAbsX.kr;\
	y = ~absY.kr - ~headAbsY.kr;\
	\
	phi = atan2(y, x);\
	rSquare = x.squared + y.squared;\
	\
	\cf2 // rSquare is in [0, 1.2]\cf0 \
	[phi, rSquare].flatten\
\};\
\
\
\
~isFront = \{\
	(~\cf2 posRelGPointY\cf0 .kr > 0) * 2 -1;\
\};\
\
~isLeft = \{\
	(~\cf2 posRelGPointX\cf0 .kr < 0) * 2 -1;\
\};\
\
\cf2 /*\
~a = \{~posRelGPointY.kr(1).round(0.001).poll(label: "X")\}\
~a.clear\
*/}